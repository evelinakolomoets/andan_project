# Проект
**План**
- [Шаг 1. Выбор темы](https://github.com/evelinakolomoets/andan_project/blob/main/README.md#шаг-1-выбор-темы)
- [Шаг 2. Сбор данных](https://github.com/evelinakolomoets/andan_project/blob/main/README.md#шаг-2-сбор-данных)
- [Шаг 3. Предварительная обработка](https://github.com/evelinakolomoets/andan_project/blob/main/README.md#шаг-3-предварительная-обработка)
- [Шаг 4. Визуализация](https://github.com/evelinakolomoets/andan_project/blob/main/README.md#шаг-4-визуализация)
- [Шаг 5. Создание новых признаков](https://github.com/evelinakolomoets/andan_project/blob/main/README.md#шаг-5-создание-новых-признаков)
- [Шаг 6. Гипотезы](https://github.com/evelinakolomoets/andan_project/blob/main/README.md#шаг-6-гипотезы)
- [Шаг 7. Машинное обучение](https://github.com/evelinakolomoets/andan_project/blob/main/README.md#шаг-7-машинное-обучение)

**Команда**
- Коломоец Эвелина
- Нагорская Мария
- Сомонов Данил 

## Шаг 1. Выбор темы
Рассматриваются данные с 2008 по 2023 год.

**План сбора данных:**

Спарсить:
- ключевую ставку ЦБ РФ и ФРС (индикаторы монетарной политики)
- цену золота (динамика цен защитного актива) с сайта ЦБ, 
- значение индекса IMOEX с сайта Московской биржи (индикатор состояния ключевых компаний российского рынка; кроме того, по нему можно отслеживать негативный новостной фон)
- инфляцию РФ и США 

Все эти показатели либо отражают макроэкономическую ситуацию и состояние финансового рынка в РФ, либо представляют собой те признаки, которые могут на это повлиять.

Категориальными признаками будут мягкая или жесткая денежная кредитная политика в РФ и в США (новый признак: создадим на основе ставки и инфляции), а также рабочий/нерабочий день (парсим производственный календарь). 

Наконец, мы собираемся спарсить курс USD/RUB, чтобы использовать его как целевую переменную. Описанные выше данные взаимосвязаны с курсом доллар-рубль, именно поэтому мы считаем, что можно попробовать обучить модель предсказывать его по этим индикаторам состояния рынка.


## Шаг 2. Сбор данных
> Файл этого шага: [step02_parser.ipynb](https://github.com/evelinakolomoets/andan_project/blob/main/step02_parser.ipynb)

**Результаты**:
- Курс USDRUB из XML Банка России
- Ключевая ставка с сайта Банка России
- Учетная ставка с сайта ФРС
- Цена золота из XML Банка России
- Значение IMOEX в момент открытия и закрытия торгов из ISS Московской Биржи
- ИПЦ с сайта Росстата
- ИПЦ с сайта St. Louis FED
- Производственный календарь

Парсер вынесен в файл [`financial_parser.py`](https://github.com/evelinakolomoets/andan_project/blob/main/financial_parser.py), который будет использован на следующем шаге.

## Шаг 3. Предварительная обработка
> Файл этого шага: [step03_preprocessing.ipynb](https://github.com/evelinakolomoets/andan_project/blob/main/step03_preprocessing.ipynb)

**Описание переменных**:

* `gold` — Цена золота за грамм на определенную дату, в рублях
* `cb_key_rate` — Ставка Центрального банка РФ на определенную дату, в %
* `fed_rate` — Ставка Федеральной резервной системы США на определенную дату, в %
* `imoex_open` — Значение индекса IMOEX (Мосбиржи) на момент открытия торгов, в рублях
* `imoex_close` — Значение индекса IMOEX (Мосбиржи) на момент закрытия торгов, в рублях
* `ru_cpi` — Значение индекса потребительских цен (ИПЦ) РФ на конец месяца по отношению к предыдущему месяцу (н.: май к апрелю), в %
* `us_cpi` — Значение индекса потребительских цен (ИПЦ) США на конец месяца по отношению к предыдущему месяцу (н.: май к апрелю), в %
* `workday` - Рабочий или выходной день в РФ в определенную дату, принимает 2 значения: `workday` и `day off`

**Целевая переменная:** `usdrub` — Курс доллар/рубль на определенную дату, в рублях

**Добавленные на этом этапе переменные:**
- `first_workday` - первый рабочий день после выходных. Бинарный признак, принимает значение 0 или 1. Посчитан при помощи `workday`
- `second_workday` - второй рабочий день после выходных. Бинарный признак, принимает значение 0 или 1. Посчитан при помощи `workday`

## Шаг 4. Визуализация
> Файл этого шага: [step04_plots.ipynb](https://github.com/evelinakolomoets/andan_project/blob/main/step04_plots.ipynb)

## Шаг 5. Создание новых признаков
> Файл этого шага: [step05_new_features.ipynb](https://github.com/evelinakolomoets/andan_project/blob/main/step05_new_features.ipynb)

**Добавленные на этом этапе переменные:**
- `imoex_vol` - Изменение значения индекса Мосбиржи, в рублях. Посчитано при помощи `imoex_open` и `imoex_close`
- `ru_monetary` - Разница между годовой инфляцией в России, посчитанной через месячный ИПЦ (экстраполированный на год), и ставкой Банка России, в %. Посчитана при помощи `ru_cpi` и `cb_key_rate`
- `us_monetary` - Разница между годовой инфляцией в США, посчитанной через месячный ИПЦ (экстраполированный на год), и ставкой Федеральной резервной системы, в %. Посчитана при помощи `us_cpi` и `fed_rate`

## Шаг 6. Гипотезы

**Проверяемые гипотезы:**
- Разница между значением открытия и закрытия IMOEX статистически не значима

To be continued...

## Шаг 7. Машинное обучение
> Файл этого шага: [step07_ml.ipynb](https://github.com/evelinakolomoets/andan_project/blob/main/step07_ml.ipynb)

В проекте ради эксперимента мы планируем попробовать обучить все известные нам регрессоры (линейную, случайный лес и т.д.).
